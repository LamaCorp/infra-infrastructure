{{ ansible_managed | comment }}
{% set configmerged = chrony_default_config.copy() %}
{% set _ = configmerged.update(chrony_config) %}
{% set _ = configmerged.update(chrony_group_config) %}
{% if chrony_merged_groups and hostvars[inventory_hostname]['chrony_combined_rules'].chrony_group_config is defined %}
  {% set _ = configmerged.update(hostvars[inventory_hostname]['chrony_combined_rules'].chrony_group_config) %}
{% endif %}
{% set _ = configmerged.update(chrony_host_config) %}

{% for key, value in configmerged.items() %}
{% if value is sequence and value is not mapping and value is not string %}
{% for v in value %}
{{ key }} {{ v }}
{% endfor %}
{% elif value is sameas true or value is sameas false %}
{% if value %}
{{ key }}
{% endif %}
{% else %}
{{ key }} {{ value}}
{% endif %}
{% endfor %}
{% if chrony__custom_content %}

{{ chrony__custom_content }}
{% endif %}
