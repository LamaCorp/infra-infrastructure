---
- name: Install snapclient
  ansible.builtin.apt:
    deb: "{{ snapcast_client_download_url }}"
  notify: Restart snapclient

- name: Configure snapclient
  ansible.builtin.copy:
    content: |
      # Start the client, used only by the init.d script
      START_SNAPCLIENT=true

      # Additional command line options that will be passed to snapclient
      # note that user/group should be configured in the init.d script or the systemd unit file
      # For a list of available options, invoke "snapclient --help"
      SNAPCLIENT_OPTS="{{ snapcast_client_args | join(' ') }}"
    dest: /etc/default/snapclient
    owner: root
    group: root
    mode: 0644
  notify: Restart snapclient
